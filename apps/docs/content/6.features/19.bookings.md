---
title: Bookings
description: Booking system for slots and inventory-based reservations
icon: i-lucide-calendar-check
---

# Bookings

::callout{type="warning"}
**Experimental**: This feature is under active development. API may change.
::

The Bookings feature provides a complete booking system for slot-based appointments (courts, rooms, services) and inventory-based reservations (equipment, rentals).

## Enable

```typescript
// nuxt.config.ts
export default defineNuxtConfig({
  modules: ['@fyit/crouton'],

  crouton: {
    bookings: true,
    email: true  // Optional: for booking confirmations
  }
})
```

## Key Features

- **Slot-based bookings**: Fixed time slots like court reservations, appointments
- **Inventory-based**: Quantity-based like equipment rentals
- **Customer booking wizard**: Full-page booking flow
- **Cart system**: Multiple bookings in one checkout
- **Email notifications**: Confirmations, reminders, follow-ups (opt-in)
- **Location support**: Multiple locations with different availability

## Booking Modes

### Slot Mode (Default)

Fixed time slots like `["09:00", "10:00", "11:00"]`:

```typescript
const location = {
  name: 'Tennis Court A',
  mode: 'slot',
  slots: ['09:00', '10:00', '11:00', '12:00', '14:00', '15:00', '16:00']
}
```

### Inventory Mode

Quantity-based like equipment rentals:

```typescript
const location = {
  name: 'Kayak Rental',
  mode: 'inventory',
  quantity: 20
}
```

## Composables

### useBookingAvailability

Check slot/inventory availability:

```typescript
const {
  availability,
  isSlotAvailable,
  getAvailableSlots,
  loading
} = useBookingAvailability({
  teamId: 'team-123',
  locationId: 'location-456',
  dateRange: { start: '2025-01-20', end: '2025-01-27' }
})
```

### useBookingCart

Shopping cart for bookings:

```typescript
const {
  items,
  addItem,
  removeItem,
  updateQuantity,
  clear,
  total,
  itemCount,
  checkout
} = useBookingCart()

// Add booking to cart
addItem({
  locationId: 'location-456',
  date: '2025-01-25',
  slot: '10:00',
  duration: 60
})

// Checkout all items
await checkout()
```

### useCustomerBooking

Complete customer booking flow:

```typescript
const {
  step,
  selectedLocation,
  selectedDate,
  selectedSlots,
  customerInfo,
  nextStep,
  prevStep,
  submitBooking,
  loading
} = useCustomerBooking()
```

### useBookingsSettings

Team booking settings:

```typescript
const {
  settings,
  updateSettings,
  loading
} = useBookingsSettings()
```

## Components

### Customer-Facing

| Component | Purpose |
|-----------|---------|
| `CroutonBookingCustomerBookingWizard` | Full-page booking wizard |
| `CroutonBookingCustomerBookingLocationCard` | Location selection |
| `CroutonBookingCustomerBookingSlotPicker` | Time slot picker |
| `CroutonBookingCustomerBookingConfirmation` | Booking confirmation |

### Admin/Management

| Component | Purpose |
|-----------|---------|
| `CroutonBookingPanel` | Main booking sidebar |
| `CroutonBookingCalendar` | Calendar date picker |
| `CroutonBookingList` | Bookings list |
| `CroutonBookingBookingCard` | Individual booking card |
| `CroutonBookingWeekStrip` | Week date navigation |

### Usage Example

```vue
<template>
  <CroutonBookingCustomerBookingWizard
    :team-id="teamId"
    :locations="locations"
    @complete="handleBookingComplete"
    @cancel="handleCancel"
  />
</template>
```

## API Endpoints

| Path | Method | Purpose |
|------|--------|---------|
| `/api/crouton-bookings/teams/[id]/availability` | GET | Get booked slots for date range |
| `/api/crouton-bookings/teams/[id]/customer-bookings` | GET | Get user's bookings |
| `/api/crouton-bookings/teams/[id]/customer-bookings-batch` | POST | Submit cart (batch checkout) |
| `/api/crouton-bookings/teams/[id]/customer-locations` | GET | Get accessible locations |

## Email Templates

When email is enabled, you can manage templates at `/dashboard/[team]/settings/email-templates`.

### Available Variables

| Variable | Description |
|----------|-------------|
| `{{customer_name}}` | Customer's name |
| `{{customer_email}}` | Customer's email |
| `{{booking_date}}` | Formatted booking date |
| `{{booking_slot}}` | Time slot(s) |
| `{{location_name}}` | Location name |
| `{{location_address}}` | Full address |
| `{{team_name}}` | Team/business name |
| `{{booking_reference}}` | Booking reference number |

### Trigger Types

| Trigger | When Sent |
|---------|-----------|
| `booking_created` | When a new booking is made |
| `reminder_before` | Before the booking date |
| `booking_cancelled` | When a booking is cancelled |
| `follow_up_after` | After the booking date |

## Database Tables

The package expects tables with `bookings` prefix:

| Schema | Table Name |
|--------|------------|
| booking.json | `bookingsBookings` |
| location.json | `bookingsLocations` |
| settings.json | `bookingsSettings` |
| email-template.json | `bookingsEmailtemplates` |
| email-log.json | `bookingsEmaillogs` |

## Configuration

```typescript
// nuxt.config.ts
export default defineNuxtConfig({
  modules: ['@fyit/crouton'],

  crouton: {
    bookings: true
  },

  // Optional: Enable email
  runtimeConfig: {
    croutonBookings: {
      email: { enabled: true }
    },
    public: {
      croutonBookings: {
        email: { enabled: true }
      }
    }
  }
})
```

## Use Cases

- **Sports facilities**: Court reservations, gym equipment
- **Healthcare**: Appointment scheduling
- **Services**: Salon bookings, consultations
- **Rentals**: Equipment, vehicles, spaces
- **Events**: Workshops, classes, tours

## Testing

A test app is available at `apps/test-bookings/`:

```bash
cd apps/test-bookings
pnpm crouton generate
npx nuxt db:generate
npx nuxt db:migrate
pnpm dev
```

## Related

- [Email](/features/email) - Email notifications
- [Authentication](/advanced/team-based-auth) - User authentication
- [Package Architecture](/fundamentals/packages#fyi-crouton-bookings) - Package details
