/**
 * @crouton-generated
 * @collection usermappings
 * @layer triage
 * @generated 2026-02-10
 *
 * ## AI Context
 * - Composable: useTriageUserMappings
 * - Collection name: triageUserMappings
 * - API endpoint: /api/teams/[id]/triage-usermappings
 * - Form component: TriageUserMappingsForm
 * - List component: TriageUserMappingsList
 * - Fields: sourceType, sourceWorkspaceId, sourceUserId, sourceUserEmail, sourceUserName, notionUserId, notionUserName, notionUserEmail, mappingType, confidence, active, lastSyncedAt, metadata
 *
 * ## Common Modifications
 * - Add field: Add to schema object and defaultValues
 * - Change validation: Modify z.object() schema
 * - Add column: Add to columns array
 * - Change API path: Modify apiPath in config
 *
 * This file was generated by @fyit/crouton-cli
 * Safe to modify - regeneration requires --force flag
 */

import { z } from 'zod'

// Schema exported separately - Zod 4 schemas cannot survive deep cloning
// Keep schema outside of objects that might be serialized/cloned during SSR
export const triageUserMappingSchema = z.object({
  sourceType: z.string().min(1, 'sourceType is required'),
  sourceWorkspaceId: z.string().min(1, 'sourceWorkspaceId is required'),
  sourceUserId: z.string().min(1, 'sourceUserId is required'),
  sourceUserEmail: z.string().optional(),
  sourceUserName: z.string().optional(),
  notionUserId: z.string().min(1, 'notionUserId is required'),
  notionUserName: z.string().optional(),
  notionUserEmail: z.string().optional(),
  mappingType: z.string().min(1, 'mappingType is required'),
  confidence: z.number().optional(),
  active: z.boolean(),
  lastSyncedAt: z.string().optional(),
  metadata: z.record(z.string(), z.any()).optional()
})

export const triageUserMappingsColumns = [
  { accessorKey: 'sourceType', header: 'SourceType' },
  { accessorKey: 'sourceWorkspaceId', header: 'SourceWorkspaceId' },
  { accessorKey: 'sourceUserId', header: 'SourceUserId' },
  { accessorKey: 'sourceUserEmail', header: 'SourceUserEmail' },
  { accessorKey: 'sourceUserName', header: 'SourceUserName' },
  { accessorKey: 'notionUserId', header: 'NotionUserId' },
  { accessorKey: 'notionUserName', header: 'NotionUserName' },
  { accessorKey: 'notionUserEmail', header: 'NotionUserEmail' },
  { accessorKey: 'mappingType', header: 'MappingType' },
  { accessorKey: 'confidence', header: 'Confidence' },
  { accessorKey: 'active', header: 'Active' },
  { accessorKey: 'lastSyncedAt', header: 'LastSyncedAt' },
  { accessorKey: 'metadata', header: 'Metadata' }
]

// Config object WITHOUT schema - safe for SSR serialization
const _triageUserMappingsConfig = {
  name: 'triageUserMappings',
  layer: 'triage',
  apiPath: 'triage-usermappings',
  componentName: 'TriageUserMappingsForm',
  defaultValues: {
    sourceType: '',
    sourceWorkspaceId: '',
    sourceUserId: '',
    sourceUserEmail: '',
    sourceUserName: '',
    notionUserId: '',
    notionUserName: '',
    notionUserEmail: '',
    mappingType: '',
    confidence: 0,
    active: false,
    lastSyncedAt: '',
    metadata: {}
  },
  columns: triageUserMappingsColumns,
}

// Add schema as non-enumerable property so klona skips it during cloning
Object.defineProperty(_triageUserMappingsConfig, 'schema', {
  value: triageUserMappingSchema,
  enumerable: false,
  configurable: false,
  writable: false
})

export const triageUserMappingsConfig = _triageUserMappingsConfig as typeof _triageUserMappingsConfig & { schema: typeof triageUserMappingSchema }

export const useTriageUserMappings = () => triageUserMappingsConfig

// Default export for auto-import compatibility
export default function () {
  return {
    defaultValue: triageUserMappingsConfig.defaultValues,
    schema: triageUserMappingSchema,
    columns: triageUserMappingsConfig.columns,
    collection: triageUserMappingsConfig.name
  }
}