/**
 * @crouton-generated
 * @collection discussions
 * @layer triage
 * @generated 2026-02-11
 *
 * ## AI Context
 * - Composable: useTriageDiscussions
 * - Collection name: triageDiscussions
 * - API endpoint: /api/teams/[id]/triage-discussions
 * - Form component: TriageDiscussionsForm
 * - List component: TriageDiscussionsList
 * - Fields: sourceType, sourceThreadId, sourceUrl, flowInputId, title, content, authorHandle, participants, status, threadData, totalMessages, aiSummary, aiKeyPoints, aiTasks, isMultiTask, syncJobId, notionTaskIds, rawPayload, metadata, processedAt
 *
 * ## Common Modifications
 * - Add field: Add to schema object and defaultValues
 * - Change validation: Modify z.object() schema
 * - Add column: Add to columns array
 * - Change API path: Modify apiPath in config
 *
 * This file was generated by @fyit/crouton-cli
 * Safe to modify - regeneration requires --force flag
 */

import { z } from 'zod'

// Schema exported separately - Zod 4 schemas cannot survive deep cloning
// Keep schema outside of objects that might be serialized/cloned during SSR
export const triageDiscussionSchema = z.object({
  sourceType: z.string().min(1, 'sourceType is required'),
  sourceThreadId: z.string().min(1, 'sourceThreadId is required'),
  sourceUrl: z.string().min(1, 'sourceUrl is required'),
  flowInputId: z.string().min(1, 'flowInputId is required'),
  title: z.string().min(1, 'title is required'),
  content: z.string().min(1, 'content is required'),
  authorHandle: z.string().min(1, 'authorHandle is required'),
  participants: z.array(z.string()).optional(),
  status: z.string().min(1, 'status is required'),
  threadData: z.record(z.string(), z.any()).optional(),
  totalMessages: z.number().optional(),
  aiSummary: z.string().optional(),
  aiKeyPoints: z.array(z.string()).optional(),
  aiTasks: z.record(z.string(), z.any()).optional(),
  isMultiTask: z.boolean().optional(),
  syncJobId: z.string().optional(),
  notionTaskIds: z.array(z.string()).optional(),
  rawPayload: z.record(z.string(), z.any()).optional(),
  metadata: z.record(z.string(), z.any()).optional(),
  processedAt: z.date().optional()
})

export const triageDiscussionsColumns = [
  { accessorKey: 'sourceType', header: 'SourceType' },
  { accessorKey: 'sourceThreadId', header: 'SourceThreadId' },
  { accessorKey: 'sourceUrl', header: 'SourceUrl' },
  { accessorKey: 'flowInputId', header: 'FlowInputId' },
  { accessorKey: 'title', header: 'Title' },
  { accessorKey: 'content', header: 'Content' },
  { accessorKey: 'authorHandle', header: 'AuthorHandle' },
  { accessorKey: 'participants', header: 'Participants' },
  { accessorKey: 'status', header: 'Status' },
  { accessorKey: 'threadData', header: 'ThreadData' },
  { accessorKey: 'totalMessages', header: 'TotalMessages' },
  { accessorKey: 'aiSummary', header: 'AiSummary' },
  { accessorKey: 'aiKeyPoints', header: 'AiKeyPoints' },
  { accessorKey: 'aiTasks', header: 'AiTasks' },
  { accessorKey: 'isMultiTask', header: 'IsMultiTask' },
  { accessorKey: 'syncJobId', header: 'SyncJobId' },
  { accessorKey: 'notionTaskIds', header: 'NotionTaskIds' },
  { accessorKey: 'rawPayload', header: 'RawPayload' },
  { accessorKey: 'metadata', header: 'Metadata' },
  { accessorKey: 'processedAt', header: 'ProcessedAt' }
]

// Config object WITHOUT schema - safe for SSR serialization
const _triageDiscussionsConfig = {
  name: 'triageDiscussions',
  layer: 'triage',
  apiPath: 'triage-discussions',
  componentName: 'TriageDiscussionsForm',
  defaultValues: {
    sourceType: '',
    sourceThreadId: '',
    sourceUrl: '',
    flowInputId: '',
    title: '',
    content: '',
    authorHandle: '',
    participants: [],
    status: '',
    threadData: {},
    totalMessages: 0,
    aiSummary: '',
    aiKeyPoints: [],
    aiTasks: {},
    isMultiTask: false,
    syncJobId: '',
    notionTaskIds: [],
    rawPayload: {},
    metadata: {},
    processedAt: null
  },
  columns: triageDiscussionsColumns,
}

// Add schema as non-enumerable property so klona skips it during cloning
Object.defineProperty(_triageDiscussionsConfig, 'schema', {
  value: triageDiscussionSchema,
  enumerable: false,
  configurable: false,
  writable: false
})

export const triageDiscussionsConfig = _triageDiscussionsConfig as typeof _triageDiscussionsConfig & { schema: typeof triageDiscussionSchema }

export const useTriageDiscussions = () => triageDiscussionsConfig

// Default export for auto-import compatibility
export default function () {
  return {
    defaultValue: triageDiscussionsConfig.defaultValues,
    schema: triageDiscussionSchema,
    columns: triageDiscussionsConfig.columns,
    collection: triageDiscussionsConfig.name
  }
}