# Feature Ideas & Future Improvements

This document tracks feature ideas, improvements, and enhancements for Nuxt Crouton.

---

## 🎯 High Priority

### 1. Template Library
**Problem:** Every new project starts from scratch
**Solution:** Pre-built config templates for common app types

```bash
# Quick start from template
pnpm crouton-generate from-template saas-starter
pnpm crouton-generate from-template marketplace
pnpm crouton-generate from-template blog-cms
pnpm crouton-generate from-template admin-panel
```

**Templates to include:**
- `saas-starter` - Users, teams, subscriptions, billing
- `marketplace` - Products, vendors, orders, reviews
- `blog-cms` - Posts, authors, categories, comments
- `admin-panel` - Users, roles, permissions, audit logs
- `ecommerce` - Products, inventory, orders, customers
- `crm` - Contacts, deals, tasks, activities

**Location:** `packages/nuxt-crouton-templates/configs/`

---

### 2. Preview Mode
**Problem:** Hard to know what will be generated before running
**Solution:** Dry-run mode that shows what would be created

```bash
npx crouton-generate config ./crouton.config.js --preview

# Output:
📋 Preview: Would generate the following files:

layers/shop/
  ├── components/products/
  │   ├── List.vue (new)
  │   ├── Form.vue (new)
  │   └── Table.vue (new)
  ├── composables/
  │   └── useProducts.ts (new)
  └── types/
      └── products.ts (new)

layers/admin/
  ├── components/roles/
  │   ├── List.vue (exists - would overwrite)
  │   ├── Form.vue (exists - would skip)
  ...

Total: 47 files (32 new, 15 would overwrite)

Proceed? (y/n)
```

**Features:**
- Show file paths
- Mark new vs existing vs would-overwrite
- Estimate time to generate
- Show schema validation results

---

### 3. Skip Existing / Incremental Mode
**Problem:** Adding one collection regenerates everything
**Solution:** Only generate new collections, skip existing

```bash
# First time: generate everything
npx crouton-generate config ./crouton.config.js

# Later: add new collection to config
vim crouton.config.js  # Add 'reviews'

# Only generate the new one
npx crouton-generate config ./crouton.config.js --skip-existing
```

**Config flag:**
```javascript
flags: {
  force: false,        // Don't overwrite
  skipExisting: true,  // Only new collections
  updateTypes: true    // But update type definitions
}
```

---

### 4. Version Tracking in Generated Files
**Problem:** Hard to know which version generated a file
**Solution:** Add version header to all generated files

```vue
<!--
  Generated by: @friendlyinternet/nuxt-crouton v2.0.0
  Generated on: 2025-09-30 18:45:32
  Schema: ./schemas/product-schema.json

  To regenerate:
  pnpm crouton-generate shop products --fields ./schemas/product-schema.json --force

  Migration guide: https://docs.nuxt-crouton.com/migrations/v2
-->
<template>
  ...
</template>
```

**Benefits:**
- Know which files are outdated
- Quick regenerate command
- Link to migration guide

---

### 5. Better Vite Watch Configuration
**Problem:** Changes to core don't hot-reload in consuming apps
**Solution:** Document and auto-configure Vite watch

```typescript
// Auto-add to nuxt.config.ts when installing
export default defineNuxtConfig({
  vite: {
    server: {
      watch: {
        ignored: ['!**/node_modules/@friendlyinternet/**']
      }
    },
    optimizeDeps: {
      exclude: ['@friendlyinternet/nuxt-crouton']
    }
  }
})
```

**Or via CLI:**
```bash
pnpm crouton-dev-setup
# Automatically configures nuxt.config.ts for hot reload
```

---

## 📚 Documentation & DX

### 6. Interactive Examples
**Problem:** Forgetting API syntax
**Solution:** Built-in examples command

```bash
pnpm crouton-example mutation
pnpm crouton-example query
pnpm crouton-example form
pnpm crouton-example config
```

**Output:**
```
📖 Example: Mutation

Quick way (anywhere):
  const { mutate } = useCroutonMutate()
  await mutate('create', 'adminRoles', { name: 'Admin' })

Optimized way (forms):
  const { create } = useCollectionMutation('adminRoles')
  await create({ name: 'Admin' })

See: docs/guides/mutations-guide.md
```

---

### 7. Migration Guides Per Version
**Problem:** Breaking changes are hard to track
**Solution:** Dedicated migration docs

```
docs/migrations/
  v1-to-v2.md  # send() → useCollectionMutation()
  v2-to-v3.md  # Future changes
```

**Format:**
```markdown
# Migration Guide: v1 → v2

## Breaking Changes

### 1. `send()` Removed from `useCrouton()`

**Before:**
const { send } = useCrouton()
await send('create', 'roles', data)

**After:**
const { mutate } = useCroutonMutate()
await mutate('create', 'roles', data)

**Why:** Separation of concerns - mutations vs modal state

**Affected files:** All Form.vue components

**Migration script:** (none - manual update required)
```

---

### 8. TypeScript Documentation
**Problem:** Not clear how to use with TypeScript
**Solution:** Comprehensive TypeScript guide

Topics:
- Generic types for collections
- Custom type definitions
- Type-safe forms
- Extending generated types
- Zod schema integration

---

### 9. Video Tutorials
**Problem:** Text docs are dry
**Solution:** Screen recordings

Videos:
1. "Getting Started in 5 Minutes"
2. "Generating Your First Collection"
3. "Customizing Generated Forms"
4. "Multi-Collection Config"
5. "Working with Translations"
6. "Team-Based Authentication"

---

### 10. Playground / Sandbox
**Problem:** Hard to try without installing
**Solution:** StackBlitz/CodeSandbox template

```bash
# One-click deploy to sandbox
https://stackblitz.com/github/pmcp/nuxt-crouton-starter
```

Pre-configured with:
- Nuxt Crouton installed
- Sample collections
- Working CRUD
- Editable code

---

## 🔧 Developer Tools

### 11. VS Code Extension
**Problem:** Context switching to terminal
**Solution:** VS Code extension for generation

Features:
- Right-click folder → "Generate Collection"
- Schema file preview
- Generated file preview
- Quick snippets for composables

Commands:
- `Crouton: Generate Collection`
- `Crouton: Generate from Config`
- `Crouton: Show Examples`
- `Crouton: Check Updates`

---

### 12. Schema Visual Editor
**Problem:** Writing JSON schemas is tedious
**Solution:** Web-based schema builder

```bash
pnpm crouton-schema-editor
# Opens http://localhost:3333
```

Features:
- Drag-and-drop fields
- Type selection (string, number, date, etc.)
- Validation rules
- Relations builder
- Export to JSON
- Import existing schemas

---

### 13. Collection Inspector
**Problem:** Hard to see all collections at once
**Solution:** CLI command to list collections

```bash
pnpm crouton-list

# Output:
📦 Collections in this project:

shop (4 collections)
  ├── products (12 fields, translations: yes)
  ├── categories (5 fields)
  ├── inventory (8 fields)
  └── orders (15 fields, relations: 3)

blog (3 collections)
  ├── posts (10 fields, translations: yes)
  ├── comments (6 fields, relations: 2)
  └── authors (7 fields)

admin (3 collections)
  ├── users (11 fields, team-based: yes)
  ├── roles (6 fields)
  └── permissions (4 fields)

Total: 10 collections across 3 layers
```

---

### 14. Upgrade Assistant
**Problem:** Breaking changes are manual
**Solution:** Automated upgrade tool

```bash
pnpm crouton-upgrade

# Output:
🔍 Checking for outdated generated files...

Found 5 files generated with v1.0.0:
  ✗ layers/admin/components/roles/Form.vue
  ✗ layers/shop/components/products/Form.vue
  ...

Upgrade to v2.0.0? This will:
  - Update send() → useCollectionMutation()
  - Add version headers
  - Fix deprecated patterns

⚠️  Backup recommended. Continue? (y/n)
```

**Features:**
- Detect version mismatch
- AST-based code transformation
- Safe fallbacks
- Dry-run mode
- Create backups

---

## 🎨 Generator Improvements

### 15. Custom Templates
**Problem:** Generated code doesn't match project style
**Solution:** Template override system

```
.crouton/templates/
  form.vue.ejs        # Override default form
  list.vue.ejs        # Override default list
  composable.ts.ejs   # Override default composable
```

**Config:**
```javascript
export default {
  templates: {
    form: './.crouton/templates/form.vue.ejs',
    list: './.crouton/templates/list.vue.ejs'
  }
}
```

---

### 16. Plugin System
**Problem:** Can't extend generator behavior
**Solution:** Plugin hooks

```javascript
// crouton.config.js
export default {
  plugins: [
    './plugins/add-audit-fields.js',
    './plugins/add-soft-delete.js',
    '@crouton/plugin-relations'
  ]
}
```

**Plugin example:**
```javascript
// plugins/add-audit-fields.js
export default {
  name: 'audit-fields',

  transformSchema(schema) {
    return {
      ...schema,
      fields: [
        ...schema.fields,
        { name: 'createdBy', type: 'string' },
        { name: 'updatedBy', type: 'string' }
      ]
    }
  },

  transformForm(code, collection) {
    // Add audit field logic
    return code
  }
}
```

---

### 17. Relation Generator
**Problem:** Relations are manual work
**Solution:** Auto-generate relation code

```javascript
// In schema
{
  name: 'authorId',
  type: 'relation',
  target: 'blogAuthors',
  display: 'name'
}
```

**Generated form field:**
```vue
<UFormField label="Author" name="authorId">
  <USelectMenu
    v-model="state.authorId"
    :options="authors"
    option-attribute="name"
    value-attribute="id"
  />
</UFormField>
```

**Auto-fetch related data:**
```typescript
const { items: authors } = await useCollectionQuery('blogAuthors')
```

---

### 18. Validation Generator
**Problem:** Zod schemas are repetitive
**Solution:** Auto-generate from JSON schema

```json
{
  "name": "email",
  "type": "string",
  "validation": {
    "required": true,
    "format": "email",
    "maxLength": 255
  }
}
```

**Generated Zod:**
```typescript
const schema = z.object({
  email: z.string()
    .email('Invalid email')
    .max(255, 'Too long')
})
```

---

### 19. Enum Support
**Problem:** Dropdowns need manual setup
**Solution:** Enum field type

```json
{
  "name": "status",
  "type": "enum",
  "options": ["draft", "published", "archived"],
  "default": "draft"
}
```

**Generated form:**
```vue
<UFormField label="Status" name="status">
  <USelectMenu
    v-model="state.status"
    :options="[
      { label: 'Draft', value: 'draft' },
      { label: 'Published', value: 'published' },
      { label: 'Archived', value: 'archived' }
    ]"
  />
</UFormField>
```

---

### 20. Media Upload Fields
**Problem:** Image/file uploads are custom
**Solution:** Built-in media field type

```json
{
  "name": "avatar",
  "type": "media",
  "accept": "image/*",
  "maxSize": "5MB",
  "storage": "cloudflare-r2"
}
```

**Generated form:**
```vue
<UFormField label="Avatar" name="avatar">
  <MediaUpload
    v-model="state.avatar"
    accept="image/*"
    :max-size="5 * 1024 * 1024"
  />
</UFormField>
```

---

## 🚀 Performance & Quality

### 21. Bundle Size Tracking
**Problem:** Don't know impact of features
**Solution:** Bundle size report

```bash
pnpm crouton-analyze

# Output:
📊 Bundle Analysis:

Core:
  useCrouton.ts         12.3 KB
  useCollectionMutation 8.7 KB
  useCollectionQuery    9.2 KB

Generated (per collection):
  List.vue              5.4 KB
  Form.vue              8.9 KB
  composable.ts         4.2 KB

Total for 10 collections: ~180 KB
```

---

### 22. Performance Profiler
**Problem:** Don't know if optimizations work
**Solution:** Built-in profiler

```typescript
// Auto-log slow operations
const { items } = await useCollectionQuery('products', {
  debug: true  // Logs timing, cache hits, network
})
```

**Console output:**
```
[useCollectionQuery] products
  ✓ Cache hit (0ms)
  ✓ Returned 50 items

[useCollectionMutation] create
  → API call (230ms)
  → Cache invalidation (5ms)
  → Refetch triggered (180ms)
  ✓ Total: 415ms
```

---

### 23. Test Generator
**Problem:** No tests for generated code
**Solution:** Generate Vitest tests

```bash
pnpm crouton-generate admin roles --with-tests

# Generates:
tests/
  admin/
    roles.test.ts
```

**Test content:**
```typescript
describe('Admin Roles', () => {
  it('creates a role', async () => {
    const { create } = useCollectionMutation('adminRoles')
    const role = await create({ name: 'Admin' })
    expect(role).toHaveProperty('id')
  })

  it('lists roles', async () => {
    const { items } = await useCollectionQuery('adminRoles')
    expect(items.value).toBeArray()
  })
})
```

---

### 24. Accessibility Audit
**Problem:** Generated forms might not be accessible
**Solution:** Built-in a11y checks

```bash
pnpm crouton-audit a11y

# Output:
♿ Accessibility Audit:

✓ All forms have labels
✗ 3 forms missing ARIA descriptions
✗ 1 form missing focus management
✓ Color contrast passes WCAG AA

Score: 85/100
See: docs/accessibility.md
```

---

## 🌍 Internationalization

### 25. Translation UI
**Problem:** Managing translations is tedious
**Solution:** Translation management UI

```bash
pnpm crouton-translations

# Opens UI at http://localhost:3334
```

Features:
- View all translatable fields
- Edit translations inline
- Import/export to JSON
- Missing translation detector
- Auto-translate with AI (optional)

---

### 26. Multi-Locale Schema
**Problem:** Collection names aren't translated
**Solution:** Locale-aware config

```javascript
export default {
  collections: [
    {
      name: 'products',
      labels: {
        en: 'Products',
        fr: 'Produits',
        de: 'Produkte'
      }
    }
  ]
}
```

---

## 🔐 Security & Auth

### 27. Permission Templates
**Problem:** RBAC setup is manual
**Solution:** Permission generator

```bash
pnpm crouton-generate permissions --for products

# Generates:
server/utils/permissions.ts
  - canCreateProduct(user, team)
  - canUpdateProduct(user, product)
  - canDeleteProduct(user, product)
  - canViewProduct(user, product)
```

---

### 28. Audit Log Generator
**Problem:** Tracking changes manually
**Solution:** Auto-generate audit logs

```javascript
flags: {
  auditLog: true  // Add audit logging to all mutations
}
```

**Generated:**
```typescript
// Automatically logs to audit_logs table
await create({ name: 'Test' })
// → Creates audit log: "User X created product Y"
```

---

## 🧪 Testing & Quality

### 29. E2E Test Generator
**Problem:** No integration tests
**Solution:** Generate Playwright tests

```bash
pnpm crouton-generate admin roles --with-e2e

# Generates:
e2e/
  admin/
    roles.spec.ts  # Full CRUD flow test
```

---

### 30. Storybook Integration
**Problem:** Hard to preview components
**Solution:** Generate Storybook stories

```bash
pnpm crouton-storybook

# Generates stories for all collections
```

---

## 🔄 Data Management

### 31. Seed Data Generator
**Problem:** Empty database for testing
**Solution:** Generate seed data

```bash
pnpm crouton-seed --count 50

# Creates 50 sample records per collection
```

**Config:**
```javascript
{
  seed: {
    products: { count: 100, factory: './factories/product.ts' },
    users: { count: 20 }
  }
}
```

---

### 32. Data Migration Tool
**Problem:** Schema changes break data
**Solution:** Migration generator

```bash
pnpm crouton-migrate add-field products sku string

# Generates:
migrations/
  20250930_add_sku_to_products.ts
```

---

### 33. Import/Export
**Problem:** Moving data between environments
**Solution:** Bulk import/export

```bash
pnpm crouton-export products > products.json
pnpm crouton-import products < products.json
```

---

## 📱 UI/UX

### 34. Dark Mode Support
**Status:** Check if already working
**Action:** Document and ensure consistency

---

### 35. Mobile-Optimized Forms
**Problem:** Forms are desktop-only
**Solution:** Responsive generated forms

```javascript
flags: {
  mobileOptimized: true  // Generate mobile-friendly forms
}
```

---

### 36. Keyboard Shortcuts
**Problem:** Mouse-only workflows
**Solution:** Built-in shortcuts

```
Cmd+K: Quick search
Cmd+N: New item
Cmd+E: Edit item
Cmd+/: Show shortcuts
```

---

### 37. Bulk Actions UI
**Problem:** No bulk operations
**Solution:** Multi-select with actions

```vue
<CroutonList
  :bulk-actions="[
    { label: 'Delete', action: 'delete' },
    { label: 'Archive', action: 'archive' },
    { label: 'Export', action: 'export' }
  ]"
/>
```

---

## 🔌 Integrations

### 38. Drizzle ORM Integration
**Problem:** Manual DB setup
**Solution:** Generate Drizzle schemas

```bash
pnpm crouton-generate config ./crouton.config.js --with-drizzle

# Generates:
db/schema/
  products.ts  # Drizzle table definition
  roles.ts
  ...
```

---

### 39. Zod Schema Export
**Problem:** Validation separated from types
**Solution:** Export Zod schemas

```bash
pnpm crouton-export-schemas

# Generates:
schemas/
  products.zod.ts
  roles.zod.ts
```

---

### 40. API Route Generator
**Problem:** Backend routes are manual
**Solution:** Generate Nuxt server routes

```bash
pnpm crouton-generate admin roles --with-api

# Generates:
server/api/teams/[team]/admin-roles/
  index.get.ts   # List
  index.post.ts  # Create
  [id].get.ts    # Read
  [id].patch.ts  # Update
  [id].delete.ts # Delete
```

---

## 🎓 Learning & Onboarding

### 41. Interactive Tutorial
**Problem:** Steep learning curve
**Solution:** Built-in tutorial

```bash
pnpm crouton-tutorial

# Step-by-step guide with:
# 1. Create first collection
# 2. Customize form
# 3. Add validation
# 4. Test CRUD operations
```

---

### 42. Cheat Sheet
**Problem:** Forgetting commands
**Solution:** Quick reference

```bash
pnpm crouton-help

# Or save to file
pnpm crouton-help --save > CHEATSHEET.md
```

---

### 43. Recipe Book
**Problem:** Common patterns not documented
**Solution:** Cookbook with recipes

```markdown
docs/recipes/
  01-conditional-fields.md
  02-dependent-dropdowns.md
  03-multi-step-forms.md
  04-file-uploads.md
  05-rich-text-editor.md
  ...
```

---

## 🔮 Advanced Features

### 44. GraphQL Support
**Problem:** REST only
**Solution:** Optional GraphQL layer

```javascript
flags: {
  graphql: true  // Generate GraphQL resolvers
}
```

---

### 45. Real-time Subscriptions
**Problem:** No live updates
**Solution:** WebSocket integration

```typescript
const { items } = await useCollectionQuery('products', {
  realtime: true  // Auto-updates when data changes
})
```

---

### 46. Offline Support
**Problem:** No offline mode
**Solution:** IndexedDB caching

```typescript
const { items } = await useCollectionQuery('products', {
  offline: true  // Cache in IndexedDB
})
```

---

### 47. Version Control for Data
**Problem:** No data history
**Solution:** Time-travel debugging

```typescript
// View previous versions
const history = await getCollectionHistory('products', 'id123')

// Restore previous version
await restoreVersion('products', 'id123', 'version-xyz')
```

---

### 48. AI-Assisted Generation
**Problem:** Schema creation is manual
**Solution:** AI schema generator

```bash
pnpm crouton-ai "Create a blog system with posts, authors, and comments"

# AI generates:
# - Schema files
# - Relations
# - Validation rules
# - Sample data
```

---

### 49. Multi-Tenancy Support
**Problem:** Each tenant needs separate collections
**Solution:** Tenant isolation

```javascript
flags: {
  multiTenant: true,
  tenantField: 'organizationId'
}
```

---

### 50. Workflow Engine
**Problem:** Complex business logic
**Solution:** State machine generator

```javascript
{
  name: 'orderStatus',
  type: 'workflow',
  states: ['pending', 'processing', 'shipped', 'delivered'],
  transitions: {
    pending: ['processing', 'cancelled'],
    processing: ['shipped', 'cancelled'],
    shipped: ['delivered'],
    delivered: []
  }
}
```

---

## 📊 Analytics & Monitoring

### 51. Usage Analytics
**Problem:** Don't know which collections are used
**Solution:** Built-in analytics

```bash
pnpm crouton-stats

# Output:
📊 Collection Usage (last 30 days):

products:      1,234 creates, 5,678 updates, 123 deletes
users:           567 creates,   890 updates,  12 deletes
orders:        2,345 creates,   456 updates,  78 deletes

Most active: products (7,035 operations)
Least active: settings (23 operations)
```

---

### 52. Error Tracking
**Problem:** Silent failures
**Solution:** Error aggregation

```bash
pnpm crouton-errors

# Shows common errors:
# - Validation failures by field
# - API timeouts by endpoint
# - Cache misses by collection
```

---

## 🎨 Theming & Styling

### 53. Theme Generator
**Problem:** Custom styling is hard
**Solution:** Theme configuration

```javascript
theme: {
  colors: {
    primary: '#3B82F6',
    danger: '#EF4444'
  },
  components: {
    form: 'rounded-lg shadow-sm',
    button: 'rounded-md font-medium'
  }
}
```

---

### 54. CSS Framework Support
**Problem:** Locked into Nuxt UI
**Solution:** Template adapters

```bash
pnpm crouton-generate admin roles --ui tailwind
pnpm crouton-generate admin roles --ui bootstrap
pnpm crouton-generate admin roles --ui vuetify
```

---

## 🔧 Maintenance & Ops

### 55. Health Check
**Problem:** Don't know if setup is correct
**Solution:** Diagnostic tool

```bash
pnpm crouton-doctor

# Checks:
# ✓ Nuxt Crouton installed
# ✓ Collections registered
# ✗ Missing translations (3 collections)
# ✓ All schemas valid
# ⚠ Large bundle size (consider code splitting)
```

---

### 56. Update Checker
**Problem:** Miss new versions
**Solution:** Auto-check for updates

```bash
# On any command:
⚠️  New version available: v2.1.0 → v2.2.0
   Run: pnpm update @friendlyinternet/nuxt-crouton
   Changelog: https://github.com/pmcp/nuxt-crouton/releases/v2.2.0
```

---

### 57. Backup & Restore
**Problem:** Accidental overwrites
**Solution:** Auto-backup before generation

```bash
pnpm crouton-generate admin roles --force

# Automatically creates:
.crouton/backups/2025-09-30_18-45-32/
  layers/admin/components/roles/Form.vue.bak
```

**Restore:**
```bash
pnpm crouton-restore 2025-09-30_18-45-32
```

---

## 🎯 Community & Ecosystem

### 58. Plugin Marketplace
**Problem:** Can't share plugins
**Solution:** NPM-based plugin system

```bash
pnpm add @crouton/plugin-relations
pnpm add @crouton/plugin-audit-log
pnpm add @crouton/plugin-soft-delete
```

---

### 59. Showcase Gallery
**Problem:** No inspiration
**Solution:** Example apps gallery

Website: https://nuxt-crouton.com/showcase
- Real apps built with Crouton
- Source code available
- Deploy to StackBlitz

---

### 60. Discord Bot
**Problem:** Getting help is slow
**Solution:** Bot with quick answers

Commands:
- `/example mutation` - Show mutation example
- `/search database setup` - Search docs
- `/version` - Check latest version

---

## 💡 Ideas to Validate

These need user feedback before implementing:

- [ ] AI form builder
- [ ] Visual workflow designer
- [ ] Collaborative editing
- [ ] Form versioning
- [ ] A/B testing for forms
- [ ] Form analytics (field completion rates)
- [ ] Progressive web app support
- [ ] Native mobile apps (Capacitor)
- [ ] Desktop apps (Tauri)
- [ ] CLI chat interface

---

## 📝 Notes

**How to prioritize:**
1. High Priority = Solves current pain point
2. Documentation = Helps users understand
3. Developer Tools = Improves workflow
4. Advanced = Nice to have

**Implementation strategy:**
- Start with docs (guides, examples)
- Add developer tools (CLI improvements)
- Then advanced features

**Measuring success:**
- GitHub stars
- NPM downloads
- Discord activity
- Issue resolution time
- User testimonials

---

## 🤝 Contributing Ideas

Have an idea? Add it here!

**Template:**
```markdown
### XX. Feature Name
**Problem:** What problem does this solve?
**Solution:** How would it work?
**Example:** Show usage
**Priority:** High/Medium/Low
```

Then open a discussion or PR!
